(this.webpackJsonpstock=this.webpackJsonpstock||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(3),o=n(0),l=n.n(o),u=n(4),i=n.n(u),s=(n(12),n(5)),d=function(e){return l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u8bc1\u5238\u4ee3\u7801"),l.a.createElement("th",null,"\u80a1\u7968\u540d\u79f0"),l.a.createElement("th",null,"\u6301\u4ed3"),l.a.createElement("th",null,"\u73b0\u4ef7"),l.a.createElement("th",null,"\u5e02\u503c"),l.a.createElement("th",null,"\u4ed3\u4f4d")))},f=function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.stockName),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.price),l.a.createElement("td",null,e.value),e.percent&&l.a.createElement("td",null,e.percent))},m=function(e){var t=e.name,n=e.total;return l.a.createElement("caption",null,t+": "+n+"\u5143")},h=function(e){var t=e.holdings,n=e.name,r=e.total,a=t.map((function(e){return l.a.createElement(f,Object.assign({},e,{key:e.code}))}));return l.a.createElement("table",null,l.a.createElement(m,{name:n,total:r}),l.a.createElement(d,null),l.a.createElement("tbody",null,a))},p=function(e){var t=e.accounts,n=t.map((function(e){return l.a.createElement(h,Object.assign({},e,{key:e.name}))})),r=t[0].total;return l.a.createElement("div",null,l.a.createElement("h3",null,"Total Holding: ",Math.round(r)+"\u5143"),l.a.createElement("span",null,"(\u542b\u738b\u4e3d\u541b\u4ee3\u7ba1\u8d26\u6237\u8d44\u4ea7\u7ea616~17\u4e07)"),n)};function v(e){var t=new Set;return e.forEach((function(e){e.holdings.forEach((function(e){var n=e.code;t.add(n)}))})),Array.from(t)}function E(e,t){Object.keys(t).forEach((function(e){return t[e].quantity=0}));var n=!0,r=!1,a=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var l=c.value.holdings,u=!0,i=!1,s=void 0;try{for(var d,f=l[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var m=d.value,h=m.code,p=m.quantity;t[h].quantity+=p}}catch(v){i=!0,s=v}finally{try{u||null==f.return||f.return()}finally{if(i)throw s}}}}catch(v){r=!0,a=v}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}function _(e,t){var n=[];for(var r in t)n.push({code:r,stockName:t[r].name,quantity:t[r].quantity});e.unshift({name:"\u603b\u8ba1",holdings:n})}function y(e,t){for(var n=function(n){var r=0;e[n].holdings.forEach((function(e){var n=t[e.code].price,a=n*e.quantity;r+=a,e.stockName=t[e.code].name,e.price=Math.round(100*n)/100,e.value=Math.round(a)})),e[n].total=Math.round(r),e[n].holdings.forEach((function(t){t.percent=(t.value/e[n].total*100).toFixed(2)+"%"})),e[n].holdings.sort((function(e,t){return t.value-e.value}))},r=0;r<e.length;r++)n(r)}Object(c.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./holdings.json").then((function(e){return e.json()}));case 2:return t=e.sent,n=v(t),e.next=6,Object(s.a)(n);case 6:r=e.sent,E(t,r),_(t,r),y(t,r),i.a.render(l.a.createElement(p,{accounts:t}),document.getElementById("root"));case 11:case"end":return e.stop()}}),e)})))()},5:function(module,__webpack_exports__,__webpack_require__){"use strict";function getStockPricePromise(codes){return new Promise((function(resolve,_){var script=document.createElement("script");script.addEventListener("load",(function(){var codesInfo={};function getStockInfo(code){var codeVar="6"===code[0]?"hq_str_sh"+code:"hq_str_sz"+code;return eval(codeVar)}function getCurrentPrice(e){return parseFloat(e.split(",")[3])}function getStockName(e){return e.split(",")[0]}codes.forEach((function(e){var t=getStockInfo(e);codesInfo[e]={name:getStockName(t),price:getCurrentPrice(t)}})),resolve(codesInfo)})),script.src="http://hq.sinajs.cn/list="+codeParas(codes),document.head.appendChild(script)}));function codeParas(e){return e.map((function(e){return"6"===e[0]?"sh"+e:"sz"+e})).join(",")}}__webpack_require__.d(__webpack_exports__,"a",(function(){return getStockPricePromise}))},6:function(e,t,n){e.exports=n(13)}},[[6,1,2]]]);
//# sourceMappingURL=main.f7a8aa12.chunk.js.map